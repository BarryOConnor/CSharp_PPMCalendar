var userList,username=document.getElementById("username"),miniCal=document.getElementById("calendar-small"),mainCalendar=document.getElementById("calendar-body"),monthCal=document.getElementById("calendar-monthly"),weekCal=document.getElementById("calendar-weekly"),dayCal=document.getElementById("calendar-daily"),darklight=document.getElementById("darklight"),monthAndYear=document.getElementById("monthAndYear"),layout=document.getElementById("calendar-layout"),calendarStartDate="",calendarEndDate="",months=["January","February","March","April","May","June","July","August","September","October","November","December"],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],isUserAdmin=0,userId=0,today=new Date,currentMonth=today.getMonth(),currentYear=today.getFullYear(),currentDay=today.getDate(),sPath=window.location.pathname,sPage=sPath.substring(sPath.lastIndexOf("/")+1);function poptoast(e){var t=document.getElementById("toast");t.innerHTML=e,t.className="popup",setTimeout(function(){t.classList.remove("popup")},3e3)}function bakeCookie(e,t,n){var a="";if(n){var d=new Date;d.setTime(d.getTime()+24*n*60*60*1e3),a="; expires="+d.toUTCString()}document.cookie=e+"="+(t||"")+a+"; path=/;SameSite=Strict"}function getCookie(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var d=n[a];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(t))return d.substring(t.length,d.length)}return null}function eatCookie(e){document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}function logout(){eatCookie("PPM-username"),eatCookie("PPM-day"),eatCookie("PPM-month"),eatCookie("PPM-year"),document.location.href="index.html"}function forceDoubleDigits(e){return e<10?"0"+e:e}function daysInMonth(e,t){return 32-new Date(t,e,32).getDate()}function createUserObject(){let e={id:0,fullname:"null",isAdmin:0,email:"",totalHolidays:0,remainingHolidays:"0",phoneNumber:"",username:"null",password:"null"};return e.id=document.getElementById("user-id").value,e.fullname=document.getElementById("user-fullname").value,e.isAdmin=document.getElementById("user-isAdmin").selectedIndex,e.email=document.getElementById("user-email").value,e.totalHolidays=document.getElementById("user-holidays").value,e.remainingHolidays=document.getElementById("user-remaining").value,e.phoneNumber=document.getElementById("user-phone").value,e.username=document.getElementById("user-username").value,e.password=document.getElementById("user-password").value,e}function getUserList(e){let t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status){document.getElementById("user-id").innerHTML='<option value="0">--- select a user ---</option>',document.getElementById("email-suggest").innerHTML="";for(var e=JSON.parse(this.responseText),t=0;t<e.length;t++){var n=e[t];document.getElementById("user-id").innerHTML+='<option value="'+n.id+'">'+n.fullname+"</option>",document.getElementById("email-suggest").innerHTML+="<option>"+n.email+"</option>"}}},t.open("GET","/api/user/getusers",!0),t.send()}function showUserContent(){document.getElementById("user-select").className="form-row hidden",document.getElementById("user-content").className="form-row",document.getElementById("user-delete").className="hidden",document.getElementById("user-update").className="hidden",document.getElementById("user-create").className="hidden",displayUser(0)}function showUserSelect(){document.getElementById("user-select").className="form-row",document.getElementById("user-content").className="form-row hidden",document.getElementById("user-id").value=0,document.getElementById("user-modal-title").innerHTML="Select a user",document.getElementById("user-delete").className="hidden",document.getElementById("user-update").className="hidden",document.getElementById("user-create").className="hidden",MicroModal.show("user-modal")}function addUser(){var e=new XMLHttpRequest;e.open("POST","api/user/add"),e.setRequestHeader("Content-Type","application/json"),e.onload=function(){200===e.status?(parseInt(this.responseText)>0?alert("The user was successfully added"):alert("The user was not added, please try again later"),getUserList(),MicroModal.close("user-modal")):200!==e.status&&alert("The user was not added, please try again later")},e.send(JSON.stringify(createUserObject())),alert(JSON.stringify(createUserObject()))}function updateUser(){var e=new XMLHttpRequest;e.open("POST","api/user/update"),e.setRequestHeader("Content-Type","application/json"),e.onload=function(){200===e.status?(parseInt(this.responseText)>0?alert("The user was successfully updated"):alert("The user was not updated, please try again later"),getUserList(),MicroModal.close("user-modal")):200!==e.status&&alert("The user was not updated, please try again later")},e.send(JSON.stringify(createUserObject()))}function deleteUser(){let e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(parseInt(this.responseText)>0?alert("The user was successfully deleted"):alert("The user was not deleted, please try again later"),getUserList(),MicroModal.close("user-modal"))},e.open("GET","api/user/delete/"+document.getElementById("user-id").value,!0),e.send()}function displayUser(e){if(0==e)document.getElementById("user-modal-title").innerHTML="New User",document.getElementById("user-id").value=0,document.getElementById("user-fullname").value="",document.getElementById("user-isAdmin").value=0,document.getElementById("user-email").value="",document.getElementById("user-holidays").value=20,document.getElementById("user-remaining").value=20,document.getElementById("user-phone").value="",document.getElementById("user-username").value="",document.getElementById("user-password").value="",document.getElementById("user-create").className="";else{let t=new XMLHttpRequest;t.onreadystatechange=function(){if(4==this.readyState&&200==this.status)for(var e=JSON.parse(this.responseText),t=0;t<e.length;t++){var n=e[t];document.getElementById("user-content").className="form-row",document.getElementById("user-modal-title").innerHTML=n.fullname,document.getElementById("user-id").value=n.id,document.getElementById("user-fullname").value=n.fullname,document.getElementById("user-isAdmin").value=parseInt(n.isAdmin),document.getElementById("user-email").value=n.email,document.getElementById("user-holidays").value=n.totalHolidays,document.getElementById("user-remaining").value=n.remainingHolidays,document.getElementById("user-phone").value=n.phoneNumber,document.getElementById("user-username").value=n.username,document.getElementById("user-password").value=n.password,document.getElementById("user-delete").className="",document.getElementById("user-update").className=""}},t.open("GET","api/user/getuser/"+e),t.send()}MicroModal.show("user-modal")}function getEventList(){let e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){document.getElementById("event-type").innerHTML='<option value="0">--- select a type ---</option>';for(var e=JSON.parse(this.responseText),t=0;t<e.length;t++){var n=e[t];document.getElementById("event-type").innerHTML+='<option value="'+n.id+'">'+n.name+"</option>"}}},e.open("GET","/api/eventtype/gettypes",!0),e.send()}function createEventObject(){let e={id:0,title:"null",eventTypeId:0,invitees:"null",creatorId:0,startTime:"yyyy-mm-dd hh:mm:ss",endTime:"yyyy-mm-dd hh:mm:ss",location:"null",description:"null",approvedById:0,approved:0,notification:0,repeatDays:0,repeatUntil:"yyyy-mm-dd hh:mm:ss",isRepeat:0};return e.id=document.getElementById("event-id").value,e.title=document.getElementById("event-title").value,e.eventTypeId=document.getElementById("event-type").value,e.invitees=document.getElementById("event-invitees").value,e.creatorId=document.getElementById("event-creator").value=userId,e.startTime=document.getElementById("event-fromdate").value+" "+document.getElementById("event-fromtime").value+":00",e.endTime=document.getElementById("event-todate").value+" "+document.getElementById("event-totime").value+":00",e.location=document.getElementById("event-location").value,e.description=document.getElementById("event-description").value,e.approvedById=document.getElementById("event-approvedby").value,e.approved=document.getElementById("event-approved").value,e.notification=document.getElementById("event-notification").value,e.repeatDays=document.getElementById("event-repeat-days").value,e.repeatUntil=document.getElementById("event-repeat-until").value,e.isRepeat=document.getElementById("event-repeat").value,0!=document.getElementById("event-approved").value&&0==document.getElementById("event-approvedby").value&&(e.approvedById=userId),e}function addEvent(){if(validateForm(document.getElementById("form-event"))){var e=new XMLHttpRequest;e.open("POST","api/event/add"),e.setRequestHeader("Content-Type","application/json"),e.onload=function(){200===e.status?(poptoast(parseInt(this.responseText)>0?"The event was successfully added":"The event was not added, please try again later"),refreshCalendar(),MicroModal.close("event-modal")):200!==e.status&&poptoast("The event was not added, please try again later")},e.send(JSON.stringify(createEventObject()))}}function updateEvent(){if(validateForm(document.getElementById("form-event"))){var e=new XMLHttpRequest;e.open("POST","api/event/update"),e.setRequestHeader("Content-Type","application/json"),e.onload=function(){200===e.status?(poptoast(parseInt(this.responseText)>0?"The event was successfully updated":"The event was not updated, please try again later"),refreshCalendar(),MicroModal.close("event-modal")):200!==e.status&&poptoast("The event was not updated, please try again later")},e.send(JSON.stringify(createEventObject()))}}function deleteEvent(){let e=new XMLHttpRequest;e.onreadystatechange=function(){4==this.readyState&&200==this.status&&(poptoast(parseInt(this.responseText)>0?"The event was successfully deleted":"The event was not deleted, please try again later"),refreshCalendar(),MicroModal.close("event-modal"))},e.open("GET","api/event/delete/"+document.getElementById("event-id").value,!0),e.send()}function displayEvent(e,t="0000-00-00"){let n=new Date,a=n.getFullYear()+"-"+forceDoubleDigits(n.getMonth()+1)+"-"+forceDoubleDigits(n.getDate()),d=forceDoubleDigits(n.getHours())+":"+forceDoubleDigits(n.getMinutes());if(0==e){let e=new Date(t),n=e.getFullYear()+"-"+forceDoubleDigits(e.getMonth()+1)+"-"+forceDoubleDigits(e.getDate());document.getElementById("event-modal-title").innerHTML="New Event",document.getElementById("event-id").value="0",document.getElementById("event-title").value="",document.getElementById("event-type").selectedIndex=0,document.getElementById("event-invitees").value="",document.getElementById("event-creator").value=userId,document.getElementById("event-fromdate").value=n,document.getElementById("event-fromtime").value=d,document.getElementById("event-todate").value=n,document.getElementById("event-totime").value=d,document.getElementById("event-location").value="",document.getElementById("event-description").value="",document.getElementById("event-approvedby").value=0,document.getElementById("event-approved").value=0,document.getElementById("event-notification").value=0,document.getElementById("event-repeat-days").value=0,document.getElementById("event-repeat-until").value=a,document.getElementById("event-repeat").value=0,document.getElementById("event-approval").className="form-row hidden",document.getElementById("event-delete").classList.add("hidden"),document.getElementById("event-update").classList.add("hidden"),document.getElementById("event-create").classList.remove("hidden")}else{const t=9;let n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==this.readyState&&200==this.status)for(var e=JSON.parse(this.responseText),n=0;n<e.length;n++){var d=e[n];document.getElementById("event-modal-title").innerHTML=d.title,document.getElementById("event-id").value=d.id,document.getElementById("event-title").value=d.title,document.getElementById("event-type").value=parseInt(d.eventTypeId),document.getElementById("event-invitees").value=0==d.invitees?"":d.invitees,document.getElementById("event-creator").value=d.creatorId,document.getElementById("event-fromdate").value=d.startTime.substring(0,10),document.getElementById("event-fromtime").value=d.startTime.substring(11,16),document.getElementById("event-todate").value=d.endTime.substring(0,10),document.getElementById("event-totime").value=d.endTime.substring(11,16),document.getElementById("event-location").value=d.location,document.getElementById("event-description").value=d.description,document.getElementById("event-approvedby").value=d.approvedById,document.getElementById("event-approved").value=parseInt(d.approved),document.getElementById("event-notification").value=parseInt(d.notification),document.getElementById("event-repeat-days").value=parseInt(d.repeatDays),""==d.repeatUntil&&(d.repeatUntil=a),document.getElementById("event-repeat-until").value=d.repeatUntil,document.getElementById("event-repeat").value=d.isRepeat,parseInt(d.eventTypeId)!=t&&d.approvedById!=userId||!isUserAdmin||(document.getElementById("event-approval").className="form-row"),document.getElementById("event-delete").classList.remove("hidden"),document.getElementById("event-update").classList.remove("hidden"),document.getElementById("event-create").classList.add("hidden")}},n.open("GET","api/event/getevent/"+e),n.send()}MicroModal.show("event-modal")}function populateCalendar(){let e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){for(var e=JSON.parse(this.responseText),t=document.querySelectorAll("#calendar-small div"),n=0;n<t.length;n++)t[n].classList.remove("has-content");for(n=0;n<e.length;n++){var a=e[n];if(document.contains(document.querySelector(".monthly #calendar-body"))){let e="#calendar-body #day-"+a.startTime.substring(0,10);document.querySelector(e).innerHTML+='<button onClick="displayEvent('+a.id+')" class="event event-type-'+a.eventTypeId+'" id="event-'+a.id+'" data-modal-content-id="newevent" data-modal-background-click="disabled" data-event-id="'+a.id+'"><span class="title">'+a.title+'</span><span class="time">'+a.startTime.substring(11,16)+"-"+a.endTime.substring(11,16)+"</span></button>"}if(document.contains(document.querySelector(".weekly #calendar-body"))){let e=new Date(a.startTime).getDay(),t="#calendar-body #weekly-"+days[e]+" .time-"+a.startTime.substring(11,13);document.querySelector(t).innerHTML+='<button onClick="displayEvent('+a.id+')" class="event event-type-'+a.eventTypeId+'" id="event-'+a.id+'" data-modal-content-id="newevent" data-modal-background-click="disabled" data-event-id="'+a.id+'"><span class="title">'+a.title+'</span><span class="time">'+a.startTime.substring(11,16)+"-"+a.endTime.substring(11,16)+"</span></button>"}if(document.contains(document.querySelector(".daily #calendar-body"))){let e="#calendar-body #time-"+a.startTime.substring(11,13);document.querySelector(e).innerHTML+='<button onClick="displayEvent('+a.id+')" class="event event-type-'+a.eventTypeId+'" id="event-'+a.id+'" data-modal-content-id="newevent" data-modal-background-click="disabled" data-event-id="'+a.id+'"><span class="title">'+a.title+'</span><span class="time">'+a.startTime.substring(11,16)+"-"+a.endTime.substring(11,16)+"</span></button>"}let t="#calendar-small #mc-"+a.startTime.substring(0,10)+" a";document.querySelector(t).classList.add("has-content")}}},e.open("GET","api/event/getevent/"+userId+"/"+calendarStartDate+"/"+calendarEndDate,!0),e.send()}function miniCalNext(){currentYear=11===currentMonth?currentYear+1:currentYear,showMiniCalendar(currentMonth=(currentMonth+1)%12,currentYear),document.contains(document.querySelector(".monthly #calendar-body"))&&showMonthlyCalendar(currentMonth,currentYear),document.contains(document.querySelector(".weekly #calendar-body"))&&showWeeklyCalendar(currentMonth,currentYear),document.contains(document.querySelector(".daily #calendar-body"))&&showDailyCalendar(currentMonth,currentYear)}function miniCalPrevious(){currentYear=0===currentMonth?currentYear-1:currentYear,showMiniCalendar(currentMonth=0===currentMonth?11:currentMonth-1,currentYear),document.contains(document.querySelector(".monthly #calendar-body"))&&showMonthlyCalendar(currentMonth,currentYear),document.contains(document.querySelector(".weekly #calendar-body"))&&showWeeklyCalendar(currentMonth,currentYear),document.contains(document.querySelector(".daily #calendar-body"))&&showDailyCalendar(currentMonth,currentYear)}function showMiniCalendar(e,t){let n="",a=new Date(t,e).getDay(),d=1,o=1,r=daysInMonth(e-1,t),l=t,s=t,i=e-1,u=e+1;0==e&&(l--,i=11),11==e&&(s++,u=0),miniCal.innerHTML="",monthAndYear.innerHTML=months[e]+", "+t,n+='<div class="header"><span class="date-header">S</span></div>',n+='<div class="header"><span class="date-header">M</span></div>',n+='<div class="header"><span class="date-header">T</span></div>',n+='<div class="header"><span class="date-header">W</span></div>',n+='<div class="header"><span class="date-header">T</span></div>',n+='<div class="header"><span class="date-header">F</span></div>',n+='<div class="header"><span class="date-header">S</span></div>';for(let c=0;c<5;c++)for(let m=0;m<7;m++)0===c&&m<a?(r=daysInMonth(e-1,t)-(a-(m+1)),n+='<div id="mc-'+l+"-"+forceDoubleDigits(i+1)+"-"+forceDoubleDigits(r)+'" class="day"><a href="javascript:void(0);" class="day-border" data-year="'+l+'"  data-month="'+i+'"><span class="date">'+r+"</span></a></div>"):d>daysInMonth(e,t)?(n+='<div id="mc-'+s+"-"+forceDoubleDigits(u+1)+"-"+forceDoubleDigits(o)+'" class="day"><a href="javascript:void(0);" class="day-border" data-year="'+s+'"  data-month="'+u+'"><span class="date">'+o+"</span></a></div>",o++):(n+='<div id="mc-'+currentYear+"-"+forceDoubleDigits(e+1)+"-"+forceDoubleDigits(d)+'" class="day"><a href="javascript:void(0);" class="day-border" data-year="'+currentYear+'"  data-month="'+e+'"><span class="date',d===today.getDate()&&t===today.getFullYear()&&e===today.getMonth()&&(n+=" today"),n+='">'+d+"</span></a></div>",d++);miniCal.innerHTML=n;let c=document.getElementsByClassName("day-border"),m=function(){for(let e=0;e<c.length;e++)c[e].classList.remove("active");this.classList.add("active"),document.contains(document.querySelector(".weekly #calendar-body"))&&showWeeklyCalendar(this.getAttribute("data-month"),this.getAttribute("data-year"),this.children[0].innerHTML),document.contains(document.querySelector(".daily #calendar-body"))&&showDailyCalendar(this.getAttribute("data-month"),this.getAttribute("data-year"),this.children[0].innerHTML)};for(let e=0;e<c.length;e++)c[e].addEventListener("click",m,!1)}function refreshCalendar(){document.contains(document.querySelector(".monthly #calendar-body"))&&showMonthlyCalendar(currentMonth,currentYear),document.contains(document.querySelector(".weekly #calendar-body"))&&showWeeklyCalendar(currentMonth,currentYear),document.contains(document.querySelector(".daily #calendar-body"))&&showDailyCalendar(currentMonth,currentYear)}function showMonthlyCalendar(e,t){let n=new Date(t,e).getDay(),a=1,d=1,o=daysInMonth(e-1,t),r="",l="",s=document.querySelectorAll("#calendar-body .day"),i=0;for(let u=0;u<5;u++)for(let c=0;c<7;c++)0===u&&c<n?(o=daysInMonth(e-1,t)-(n-(c+1)),l=forceDoubleDigits(o),r=forceDoubleDigits(e),0===u&&0===c&&(calendarStartDate=t+"-"+r+"-"+l),s[i].children[0].innerHTML=o,o++):a>daysInMonth(e,t)?(l=forceDoubleDigits(d),r=forceDoubleDigits(e+2),4===u&&6===c&&(calendarEndDate=t+"-"+r+"-"+l),s[i].children[0].innerHTML=d,d++):(l=forceDoubleDigits(a),r=forceDoubleDigits(e+1),0===u&&0===c&&(calendarStartDate=t+"-"+r+"-"+l),4===u&&6===c&&(calendarEndDate=t+"-"+r+"-"+l),s[i].children[0].innerHTML=a,a++),s[i].children[1].id="day-"+t+"-"+r+"-"+l,s[i].onClick=function(){displayEvent(0,t+"-"+r+"-"+l)},s[i].setAttribute("onClick",'displayEvent(0, "'+t+"-"+r+"-"+l+'")'),s[i].children[1].innerHTML="",i++;populateCalendar()}function showWeeklyCalendar(e,t,n=1){let a=new Date(t,e,n),d=a.getDate()-a.getDay(),o=new Date(a.setDate(d)).getDate(),r=new Date(a.setDate(d)).getMonth(),l=parseInt(e)+1;r++,mainCalendar.innerHTML=weekCal.innerHTML,o>n?(calendarStartDate=t+"-",calendarStartDate+=forceDoubleDigits(r)+"-",calendarStartDate+=forceDoubleDigits(o),document.getElementById("weekly-header-sunday").innerHTML="Sunday, "+o,o==daysInMonth(e-1,t)?o=1:o++,document.getElementById("weekly-header-monday").innerHTML="Monday, "+o,o==daysInMonth(e-1,t)?o=1:o++,document.getElementById("weekly-header-tuesday").innerHTML="Tuesday, "+o,o==daysInMonth(e-1,t)?o=1:o++,document.getElementById("weekly-header-wednesday").innerHTML="Wednesday, "+o,o==daysInMonth(e-1,t)?o=1:o++,document.getElementById("weekly-header-thursday").innerHTML="Thursday, "+o,o==daysInMonth(e-1,t)?o=1:o++,document.getElementById("weekly-header-friday").innerHTML="Friday, "+o,o==daysInMonth(e-1,t)?o=1:o++,document.getElementById("weekly-header-saturday").innerHTML="Saturday, "+o,calendarEndDate=t+"-",calendarEndDate+=forceDoubleDigits(l)+"-",calendarEndDate+=forceDoubleDigits(o)):(calendarStartDate=t+"-",calendarStartDate+=forceDoubleDigits(r)+"-",calendarStartDate+=forceDoubleDigits(o),document.getElementById("weekly-header-sunday").innerHTML="Sunday, "+o,o==daysInMonth(e,t)?o=1:o++,document.getElementById("weekly-header-monday").innerHTML="Monday, "+o,o==daysInMonth(e,t)?o=1:o++,document.getElementById("weekly-header-tuesday").innerHTML="Tuesday, "+o,o==daysInMonth(e,t)?o=1:o++,document.getElementById("weekly-header-wednesday").innerHTML="Wednesday, "+o,o==daysInMonth(e,t)?o=1:o++,document.getElementById("weekly-header-thursday").innerHTML="Thursday, "+o,o==daysInMonth(e,t)?o=1:o++,document.getElementById("weekly-header-friday").innerHTML="Friday, "+o,o==daysInMonth(e,t)?o=1:o++,document.getElementById("weekly-header-saturday").innerHTML="Saturday, "+o,calendarEndDate=t+"-",calendarEndDate+=forceDoubleDigits(l)+"-",calendarEndDate+=forceDoubleDigits(o)),populateCalendar()}function showDailyCalendar(e,t,n=1){let a=new Date(t,e,n),d=parseInt(e)+1;mainCalendar.innerHTML=dayCal.innerHTML,document.getElementById("daily-header").innerHTML=days[a.getDay()]+", "+a.getDate()+" "+months[a.getMonth()],calendarStartDate=t+"-",calendarStartDate+=forceDoubleDigits(d)+"-",calendarStartDate+=forceDoubleDigits(a.getDate()),calendarEndDate=t+"-",calendarEndDate+=forceDoubleDigits(d)+"-",calendarEndDate+=forceDoubleDigits(a.getDate()),populateCalendar()}function changeLayout(e="none"){null!=getCookie("PPM-layout")&&"none"==e?e=getCookie("PPM-layout"):"none"==e&&(e="monthly"),"monthly"==e?(mainCalendar.innerHTML=monthCal.innerHTML,bakeCookie("PPM-layout","monthly",30),layout.innerHTML="Monthly",showMonthlyCalendar(currentMonth,currentYear)):"weekly"==e?(bakeCookie("PPM-layout","weekly",30),layout.innerHTML="Weekly",showWeeklyCalendar(currentMonth,currentYear,currentDay)):(bakeCookie("PPM-layout","daily",30),layout.innerHTML="Daily",showDailyCalendar(currentMonth,currentYear,currentDay)),document.body.classList.remove("monthly"),document.body.classList.remove("weekly"),document.body.classList.remove("daily"),document.body.classList.add(e)}function validateRequired(e){return 0==e.value.length||0==e.selectedIndex?(e.className=" boc-invalid",document.getElementById(e.id+"-msg").innerHTML="This field cannot be blank",!1):(e.className=" boc-valid",document.getElementById(e.id+"-msg").innerHTML="correct",!0)}function validateDate(e){var t=e.value,n=!0;/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(t)||(n=!1);var a=t.split("-"),d=parseInt(a[2],10),o=parseInt(a[1],10),r=parseInt(a[0],10),l=[31,28,31,30,31,30,31,31,30,31,30,31],s=(new Date).getFullYear();return r<s-150||r>s||0==o||o>12?(e.className=" boc-invalid",document.getElementById(e.id+"-msg").innerHTML="birth date must be between "+(s-150)+" and "+s,!1):((r%400==0||r%100!=0&&r%4==0)&&(l[1]=29),d<=0&&d>l[o-1]&&(n=!1),0==n?(e.className=" boc-invalid",document.getElementById(e.id+"-msg").innerHTML="Please enter a valid date",!1):(e.className=" boc-valid",document.getElementById(e.id+"-msg").innerHTML="correct",!0))}function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value)?(e.className=" boc-valid",document.getElementById(e.id+"-msg").innerHTML="correct",!0):(e.className=" boc-invalid",document.getElementById(e.id+"-msg").innerHTML="Email must be a valid email",!1)}function validateForm(e){for(var t=!0,n="",a=!1,d=!1,o=0;o<e.elements.length;o++)"true"==e.elements[o].getAttribute("data-validate")&&(e.elements[o].className="",-1!=(n=e.elements[o].getAttribute("data-validation-type")).search("required")&&(validateRequired(e.elements[o])||(t=!1)),-1!=n.search("file")&&(validateFile(e.elements[o])||(t=!1)),-1!=n.search("date")&&(validateDate(e.elements[o])||(t=!1)),-1!=n.search("email")&&(validateEmail(e.elements[o])||(t=!1)),-1!=n.search("optional")&&(validateOptional(e.elements[o])||(t=!1)),-1!=n.search("radio")&&(a||(validateBoxes(e.elements[o])?a=!0:t=!1)),-1!=n.search("checkbox")&&(d||(validateBoxes(e.elements[o])?d=!0:t=!1)),-1!=n.search("captcha")&&(validateCaptcha(e.elements[o])||(t=!1)));return t}document.addEventListener("DOMContentLoaded",function(e){document.body.addEventListener("mousedown",function(){document.body.classList.remove("using-keyboard")}),document.body.addEventListener("keydown",function(e){9===e.keyCode&&document.body.classList.add("using-keyboard")});if(darklight.addEventListener("click",function(){darklight.checked?(document.body.classList.add("dark"),document.body.classList.remove("light"),bakeCookie("PPM-darkmode","dark",30)):(document.body.classList.add("light"),document.body.classList.remove("dark"),bakeCookie("PPM-darkmode","light",30))},!1),document.getElementById("darklight").checked="light"!=t,document.getElementById("user-id").addEventListener("change",function(e){displayUser(document.getElementById("user-id").value)}),"index.html"!=sPage&&null==getCookie("PPM-username")&&logout(),document.contains(username)){let e=getCookie("PPM-username").split("|");username.innerHTML=e[0],isUserAdmin=e[1],userId=e[2]}if(null!=getCookie("PPM-darkmode")){var t=getCookie("PPM-darkmode");"light"==t?(document.body.classList.add("light"),document.body.classList.remove("dark")):(document.body.classList.add("dark"),document.body.classList.remove("light"))}1==isUserAdmin&&document.getElementById("admin-panel").classList.remove("hidden"),getUserList(),getEventList(),showMiniCalendar(currentMonth,currentYear),changeLayout()});